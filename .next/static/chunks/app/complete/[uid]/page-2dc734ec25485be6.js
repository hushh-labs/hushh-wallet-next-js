(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{9093:function(e,t,r){Promise.resolve().then(r.bind(r,6255))},6255:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var s=r(7437),l=r(2265),o=r(4033);function a(e){let{params:t}=e,r=(0,o.useSearchParams)().get("token"),a=t.uid,[i,n]=(0,l.useState)({city:"",state:"",zip:"",gender:"",age:"",street1:""}),[d,c]=(0,l.useState)(!1),[m,h]=(0,l.useState)(!1),[u,x]=(0,l.useState)(""),[p,f]=(0,l.useState)("");(0,l.useEffect)(()=>{r||x("Invalid or missing token. Please use the link from your pass.")},[r]);let b=async e=>{if(e.preventDefault(),r&&a){c(!0),x("");try{let e=await fetch("/api/profile/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:a,token:r,city:i.city||void 0,state:i.state||void 0,zip:i.zip||void 0,gender:i.gender||void 0,age:i.age?parseInt(i.age):void 0,street1:i.street1||void 0})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to update profile");h(!0),f(t.member||"")}catch(e){x(e instanceof Error?e.message:"An error occurred")}finally{c(!1)}}},w=e=>{n({...i,[e.target.name]:e.target.value})};return r?m?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-yellow-800 to-yellow-600 flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-white/20 text-center",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Profile Updated!"}),(0,s.jsxs)("p",{className:"text-white/80",children:["Thank you",p&&", ".concat(p),"! Your profile has been successfully updated."]})]}),(0,s.jsx)("a",{href:"/",className:"inline-block bg-gradient-to-r from-yellow-400 to-amber-500 text-amber-900 font-bold py-3 px-6 rounded-lg shadow-lg hover:from-yellow-300 hover:to-amber-400 transition-all duration-200",children:"Return Home"})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-yellow-800 to-yellow-600",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-white/20",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Complete Your Profile"}),(0,s.jsx)("p",{className:"text-white/80",children:"Add your US address details to unlock premium features"})]}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-white font-medium mb-2",children:"City"}),(0,s.jsx)("input",{type:"text",id:"city",name:"city",value:i.city,onChange:w,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"Enter your city"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"state",className:"block text-white font-medium mb-2",children:"State"}),(0,s.jsxs)("select",{id:"state",name:"state",value:i.state,onChange:w,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",className:"text-gray-700",children:"Select"}),["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"].map(e=>(0,s.jsx)("option",{value:e,className:"text-gray-700",children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"zip",className:"block text-white font-medium mb-2",children:"ZIP Code"}),(0,s.jsx)("input",{type:"text",id:"zip",name:"zip",value:i.zip,onChange:w,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"12345"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"gender",className:"block text-white font-medium mb-2",children:"Gender"}),(0,s.jsxs)("select",{id:"gender",name:"gender",value:i.gender,onChange:w,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",className:"text-gray-700",children:"Select"}),(0,s.jsx)("option",{value:"male",className:"text-gray-700",children:"Male"}),(0,s.jsx)("option",{value:"female",className:"text-gray-700",children:"Female"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"age",className:"block text-white font-medium mb-2",children:"Age"}),(0,s.jsx)("input",{type:"number",id:"age",name:"age",min:"13",max:"120",value:i.age,onChange:w,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"25"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"street1",className:"block text-white font-medium mb-2",children:"Street Address (Optional)"}),(0,s.jsx)("input",{type:"text",id:"street1",name:"street1",value:i.street1,onChange:w,className:"w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"123 Main Street"})]}),u&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-white text-sm",children:u})}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-yellow-400 to-amber-500 text-amber-900 font-bold py-4 px-6 rounded-lg shadow-lg hover:from-yellow-300 hover:to-amber-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:d?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Profile"})]}),(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsx)("p",{className:"text-white/60 text-xs",children:"All fields are optional. You can skip this step and complete later."})})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-yellow-800 to-yellow-600 flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-white/20 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-white/80",children:"Invalid or missing token. Please use the link from your HUSHH Gold Pass."})]})})}},622:function(e,t,r){"use strict";var s=r(2265),l=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function n(e,t,r){var s,n={},d=null,c=null;for(s in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,s)&&!i.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:l,type:e,key:d,ref:c,props:n,_owner:a.current}}t.jsx=n,t.jsxs=n},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=9093)}),_N_E=e.O()}]);